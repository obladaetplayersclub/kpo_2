# Задание №2. HSE-BANK. Паттерны проектирования.
Реализовал используя _JAVA 21_, _SpringBoot_ для DI-контейнеров и _Lombok_, чтобы сократить шаблонный код, например, написание конструкторов. Сборка в _Gradle_

## Как запустить приложение?
Сначала клонируем репозиторий, далее в терминале прописываем команды ниже:
```
./gradlew clean build
java -jar build/libs/kpo-2-0.0.1-SNAPSHOT.jar
```

Но опять же я склоняюсь к тому, чтобы пользователь воспользовался IntelliJ Idea:
1. Склонировал репозиторий
2. Перейти к Kpo2Application.java
3. Запустить через зеленый треугольник

## Общая идея решения

Программа представляет собой **консольное банковское приложение**, где пользователь может:

- управлять своими банковскими счетами: выбирать активный и добавлять другие
- добавлять категории доходов и расходов
- регистрировать операции доходов и расходов, также их можно редактировать
- доступен импорт и экспорт данных в таких форматах как: CSV, JSON, YAML
- можно проводить автоматическую аналитику

**Теперь чуть поподробней**

- **Аккаунты (BankAccount):**
  - создание счета, просмотр баланса
  - изменение названия/удаление счета

- **Категории (Category):**
  - создание, просмотр всех категорий
  - разграничение по типам (`INCOME` / `EXPENSE`)
  - изменение названия/типа категории
  - удаление категории

- **Операции (Operation):**
  - добавление доходов и расходов
  - редактирование и удаление операций
  - хранение связи между счётом и категорией
  
- **Импорт / Экспорт (Template Method + Visitor):**
  - работа с форматами **CSV**, **JSON**, **YAML**
  - экспорт реализован с помощью паттерна *Посетитель*
  - импорт реализован с помощью паттерн *Шаблонный метод*

- **Аналитика (Analytics):**
  - подсчет разницы доходов и расходов за выбранный период
  - группировка доходов и расходов по категориям
  - поиск самых крупных операций (`INCOME` / `EXPENSE`)

## SOLID и GRASP
В этом абзаце разберу какиие принципы SOLID и GRASP были реализованы в моем проекте

## SOLID
### S
Каждый класс выполняет одну роль: `*Facade` управляет бизнес-логикой, `*Factory` создает объекты, `*Visitor` форматирует вывод, `Kpo2Application` отвечает за CLI
### O
Добавление новой команды требует лишь реализации `Command` и регистрации. Также добавление нового формата импорта реализуется через наследование `AbstrImp`
### L
Фабрики домена `factory` гарантируют корректные инварианты и возвращают полноценные объекты, сохраняя полиморфизм доменных классов
### I
Команды опираются на минимальные интерфейсы (например, Command), репозитории разделены по типам сущностей
### D
Бизнес-логика зависит от абстракций, которые внедряются благодаря SpringBoot

## GRASP

## GoF-паттерны (и repository от DDD)
| Паттерн | Где реализован | Роль и значение |
|----------|----------------|----------------|
| **Factory Method** | `BankAccountFactory`, `CategoryFactory`, `OperationFactory` | Здесь происходит создание сущностей, также выполняется проверка данных на валидацию, яркий пример, что сумма операции  > 0). |
| **Repository** *(архитектурный)* | `repo.*`, `repo.memory.*` | Нужен для абстрагирования слоя хранения данных |
| **Facade**c(_Фасад_) | `BankAccountFacade`, `CategoryFacade`, `OperationFacade` | Данный паттерн нужен, чтобы скрывают работу с репозиториями и бизнес‑правилами, что в свою очередь снижает связность между CLI и доменом |
| **Template Method** (_Шаблонный метод_)| `io.imp.AbstrImp` | `AbstrImp` определяет общий шаблон импорта: чтение -> валидация -> сохранение, оставляя потомкам реализацию чтения/валидации |
| **Visitor** (_Посетитель_) | `CsvExportVisitor`, `JsonExportVisitor`, `YamlExportVisitor` | Позволяет добавлять новые форматы экспорта без изменения доменных объектов |
| **Command** (_Команда_) | `commands.*` | Данный паттерн я использовал так: представлял каждую команду в CLI как отдельный объект. C помощью этого паттерна легко добавлять новые действия и контроллировать имеющиеся |
| **Decorator** (_Декоратор_) | `TimingCommandDecorator` | Добавляет логирование времени выполнения без изменения команд. |

---

**Таким образом:**
- **Factory + Repository + Facade** — в совокупноси делают устойчивый слой бизнес логики
- **Template Method** и **Visitor** — обеспечивают гибкость ввода/вывода данных
- **Command + Decorator** — дают расширяемый CLI-интерфейс

## Вопросы
По всем вопросам обращаться в Telegram  
[![Telegram](https://img.shields.io/badge/Telegram-2CA5E0?logo=telegram&logoColor=white)](https://t.me/ffraud)





